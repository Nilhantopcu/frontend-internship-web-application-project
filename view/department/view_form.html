<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Document</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-body-tertiary">
        <div class="container-fluid">
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <img style="margin: 0px; width: 270px !important; margin: 5px !important; margin-left: 0px !important;"
                    src="/public/image/logo.png" alt="logo" class="logo-default">
            </div>
            <div class="d-flex align-items-center">
                <div class="dropdown">
                    <img src="/public/image/user.png" style="scale: 2.5; margin-right: 15px;" class="rounded-circle"
                        height="25" alt="Black and White Portrait of a Man" loading="lazy" />
                </div>
            </div>
        </div>
    </nav>

    <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #b5e0ff;">
        <a class="navbar-brand" href="home.html" style="padding-left: 50px;">Home Page</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor03"
            aria-controls="navbarColor03" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarColor03">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="internship_processes.html">Internship Processes</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="companies.html">Companies</a>
                </li>
            </ul>
        </div>

        <ul class="navbar-nav d-flex flex-row me-1" style="padding-right: 50px;">
            <li class="nav-item me-3 me-lg-0">
                <div class="dropdown">
                    <button type="button" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-bell" viewBox="0 0 16 16">
                            <path
                                d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2M8 1.918l-.797.161A4 4 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4 4 0 0 0-3.203-3.92zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5 5 0 0 1 13 6c0 .88.32 4.2 1.22 6">
                            </path>
                        </svg>
                    </button>
                </div>
            </li>
            <li class="nav-item" style="padding-left: 20px;">
                <a class="nav-link" href="/view/login.html">Log Out</a>
            </li>
        </ul>
    </nav>

    <div class="container mt-4">
        <h2 class="text-center mb-4">EVALUATION FORM</h2>
    </div>

    <div class="container bootstrap snippets bootdey" style="margin-bottom: 20px;">
        <div class="row ng-scope">
            <div class="col-md-2"></div>
            <div class="col-md-15">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                            <div class="row pv-lg">
                                <div class="col-lg-15">
                                    <form class="form-horizontal ng-pristine ng-valid">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <!-- Full Name -->
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label" for="inputContact1"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Full
                                                        Name:</label>
                                                    <label id="fullName" for="text"></label>
                                                </div>
                                                <!-- Internship Number -->
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label" for="inputContact3"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Internship
                                                        Number:</label>
                                                    <label id="internshipNumber" for="text"></label>
                                                </div>
                                                <!-- Company Name -->
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label" for="inputContact4"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Company
                                                        Name:</label>
                                                    <label id="companyName" for="text"></label>
                                                </div>
                                                <!-- Company E-mail -->
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label" for="inputContact5"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Company
                                                        E-mail:</label>
                                                    <label id="companyEmail" for="text"></label>
                                                </div>
                                                <!-- Internship Start Date -->
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label" for="inputContact6"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Internship
                                                        Start Date:</label>
                                                    <label id="internshipStart" for="text"></label>
                                                </div>
                                                <!-- Internship Finish Date -->
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label" for="inputContact7"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Internship
                                                        Finish Date:</label>
                                                    <label id="internshipFinish" for="text"></label>
                                                </div>
                                                <!-- Internship Duration -->
                                                <div class="form-group">
                                                    <label class="col-sm-4 control-label" for="inputContact8"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Internship
                                                        Duration:</label>
                                                    <label id="internshipDuration" for="text"></label>
                                                </div>
                                            </div>
                                            <div class="col-md-1"></div> <!-- Added this line for spacing -->
                                            <div class="col-md-7">
                                                <!-- Evaluation fields -->
                                                <div class="form-group">
                                                    <label class="col-sm-6 control-label" for="inputContact9"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Sufficiency
                                                        of internship report:</label>
                                                    <label id="reportSufficiency" for="text"
                                                        style="margin-left: 20px;"></label>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-6 control-label" for="inputContact9"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">General
                                                        level of achievement in internship studies:</label>
                                                    <label id="achievementLevel" for="text"
                                                        style="margin-left: 20px;"></label>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-6 control-label" for="inputContact9"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Willingness
                                                        to acquire new professional knowledge and
                                                        self-improvement:</label>
                                                    <label id="willingness" for="text"
                                                        style="margin-left: 20px;"></label>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-6 control-label" for="inputContact9"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Attendance,
                                                        effort spent and discipline:</label>
                                                    <label id="attendance" for="text"
                                                        style="margin-left: 20px;"></label>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-6 control-label" for="inputContact9"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Behavior
                                                        and communication with supervisors and colleagues:</label>
                                                    <label id="behavior" for="text" style="margin-left: 20px;"></label>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-6 control-label" for="inputContact9"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Ability
                                                        to apply the gained knowledge:</label>
                                                    <label id="knowledgeApplication" for="text"
                                                        style="margin-left: 20px;"></label>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-sm-6 control-label" for="inputContact9"
                                                        style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Interest
                                                        in contemporary problems of profession:</label>
                                                    <label id="professionalInterest" for="text"
                                                        style="margin-left: 20px;"></label>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Additional comments -->
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label" for="inputContact9"
                                                style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Additional
                                                comments about the intern (If any):</label>
                                            <div class="col-sm-8"
                                                style="border: 1px solid lightgray; border-radius: 5px; padding: 10px;">
                                                <span id="additionalComments"></span>
                                            </div>
                                        </div>
                                        <!-- Authorized person details -->
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label" for="inputContact9"
                                                style="margin-top: 10px; font-weight: bold; margin-bottom: 10px;">Title,
                                                name, and contact information of the authorized person:</label>
                                            <div class="col-sm-8"
                                                style="border: 1px solid lightgray; border-radius: 5px; padding: 10px;">
                                                <span id="authorizedPersonInfo"></span>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-body-tertiary text-center text-lg-start">
        <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.05);">
            2024 © FMV Işık University - Center for Educational Technologies
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const urlParams = new URLSearchParams(window.location.search);
            const internshipId = urlParams.get('id');

            if (internshipId) {
                try {
                    const response = await fetch(`http://localhost:3000/assessment/${internshipId}`, {
                        method: 'GET',
                        headers: {
                            'Authorization': 'Bearer ' + localStorage.getItem('accessToken'),
                            'Content-Type': 'application/json'
                        }
                    });

                    if (response.ok) {
                        const assessments = await response.json();
                        console.log(assessments); // API'den dönen verileri kontrol etmek için

                        if (assessments.length > 0) {
                            const assessment = assessments[0]; // Eğer birden fazla varsa ilkini alalım
                            document.getElementById('fullName').textContent = assessment.studentName || 'N/A';
                            document.getElementById('internshipNumber').textContent = assessment.internshipNumber || 'N/A';
                            document.getElementById('companyName').textContent = assessment.companyName || 'N/A';
                            document.getElementById('companyEmail').textContent = assessment.companyEmailAddress || 'N/A';
                            document.getElementById('internshipStart').textContent = assessment.startDate || 'N/A';
                            document.getElementById('internshipFinish').textContent = assessment.finishDate || 'N/A';
                            document.getElementById('internshipDuration').textContent = assessment.internshipDuration || 'N/A';
                            document.getElementById('reportSufficiency').textContent = assessment.reportSufficiency || 'N/A';
                            document.getElementById('achievementLevel').textContent = assessment.achievementLevel || 'N/A';
                            document.getElementById('willingness').textContent = assessment.willingness || 'N/A';
                            document.getElementById('attendance').textContent = assessment.attendance || 'N/A';
                            document.getElementById('behavior').textContent = assessment.behavior || 'N/A';
                            document.getElementById('knowledgeApplication').textContent = assessment.knowledgeApplication || 'N/A';
                            document.getElementById('professionalInterest').textContent = assessment.professionalInterest || 'N/A';
                            document.getElementById('additionalComments').textContent = assessment.additionalComments || 'N/A';
                            document.getElementById('authorizedPersonInfo').textContent = assessment.authorizedPersonInfo || 'N/A';
                        } else {
                            console.error('No assessment data found');
                        }
                    } else {
                        console.error('Failed to fetch assessment data');
                    }
                } catch (error) {
                    console.error('Error:', error);
                }
            } else {
                console.error('No internship ID found in URL');
            }
        });

    </script>

</body>

</html>